<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"src_parser.js.html":{"id":"src_parser.js.html","title":"Source: src/parser.js","body":" SEO COP Classes ParserRuleConditionRuleConfiguration Source: src/parser.js 'use strict'; var fs = require('fs'); var cheerio = require('cheerio'); var sprintf = require(&quot;sprintf-js&quot;).sprintf; var stream = require('stream'); var util = require('util'); var Readable = require('stream').Readable; var Writable = require('stream').Writable; //load default rules var defaultRules = require(&quot;../config/rules.json&quot;); var baseRule = require('./rules'); /** * Creates a new Parser object. * @class Parser * @constructor * @param {RuleConfiguration|string} config A valid configuration options object or configuration as a JSON string. * @param {string} [output=console] Type of output. Supported output types are console, file &amp; stream. For file type, result.txt will be created after successful execution. * @returns {Parser} * @since 1.0.0 * @example * * var Parser = require('parser'); * * var parser = new Parser({}, &quot;console&quot;); * * parser.parseFile(&quot;home.html&quot;); * * */ function Parser(config, output) { this.rules = Object.assign(JSON.parse(JSON.stringify(defaultRules)), baseRule); var me = this; Object.keys(this.rules).forEach(key =&gt; { if (key === &quot;_base&quot;) return; //add condition level base properties var conditions = []; me.rules[key].conditions.forEach(con =&gt; { conditions.push(Object.assign(con, me.rules[&quot;_base&quot;])); }); me.rules[key].conditions = conditions; me.rules[key].findElements = me.rules[&quot;_base&quot;].findElements; me.rules[key].parse = me.rules[&quot;_base&quot;].parse; }); if (typeof config === &quot;string&quot;) config = JSON.parse(config); this.output = (output == undefined || output == null ? &quot;console&quot; : output); if (this.output == &quot;stream&quot;) { this._outputReadStream; //stream on which result will be written, outputWriteStream will pipe the data this._outputWriteStream = this._createWritableStream(); /** @property {Object} outputWriteStream Writable node stream on which output will be written. @readonly **/ Object.defineProperty(this, 'outputWriteStream', { get: function() { return me._outputWriteStream; } }); } //override default rule properties; enable/disable, override behavior //or add new rules to config if (typeof config === &quot;object&quot;) { Object.keys(config).forEach(key =&gt; { if (!me.rules[key] &amp;&amp; (!config[key].hasOwnProperty(&quot;isEnabled&quot;) || !config[key].hasOwnProperty(&quot;query&quot;) || !config[key].hasOwnProperty(&quot;conditions&quot;))) { return console.log(&quot;Invalid rule &quot; + key); } if (!me.rules[key]) { //new rule defined in config me.rules[key] = {}; me.rules[key].findElements = me.rules[&quot;_base&quot;].findElements; me.rules[key].parse = me.rules[&quot;_base&quot;].parse; } if (config[key].isEnabled !== undefined) { me.rules[key].isEnabled = !!config[key].isEnabled; } if (config[key].query !== undefined) me.rules[key].query = config[key].query; if (config[key].conditions !== undefined &amp;&amp; config[key].conditions instanceof Array) { var conditions = []; config[key].conditions.forEach(con =&gt; { conditions.push(Object.assign(con, me.rules[&quot;_base&quot;])); }); me.rules[key].conditions = conditions } }); } } Parser.prototype._createWritableStream = function() { this._outputReadStream = new Readable({ objectMode: true, read() {} }); var wStream = new Writable({ objectMode: true, write: (data, _, done) =&gt; { //write on console by default, user need to override write console.log(data); done(); } }); this._outputReadStream.pipe(wStream); return wStream; } Parser.prototype._parseHTML = function(html) { var $ = cheerio.load(html, { normalizeWhitespace: true, xmlMode: true, lowerCaseTags: true, lowerCaseAttributeNames: true }); return $; } /** * Parse HTML. * @method parse * @public * @param {string} html - HTML content. * @memberof Parser.prototype * @since 1.0.0 */ Parser.prototype.parse = function(html) { var elements = this._parseHTML(html), me = this; Object.keys(this.rules).forEach(key =&gt; { if (key === &quot;_base&quot;) return; var rule = me.rules[key]; if (rule.isEnabled) { return rule.parse(elements, rule.conditions); } }); } Parser.prototype.returnResult = function() { var me = this; var _fnOutputString = function() { var str = &quot;&quot;; Object.keys(me.rules).forEach(key =&gt; { if (key === &quot;_base&quot;) return; var rule = me.rules[key]; if (rule.isEnabled) { rule.conditions.forEach(con =&gt; { if (con.failCount &gt; 0) { str = str == &quot;&quot; ? sprintf(con.error, con.failCount) : str + &quot;\\n&quot; + sprintf(con.error, con.failCount); } }); } }); return str; } if (this.output === &quot;console&quot;) { console.log(_fnOutputString()); } else if (this.output == &quot;text&quot;) { //for tests return _fnOutputString(); } else if (this.output == &quot;stream&quot;) { this._outputReadStream.push(_fnOutputString()); } else { //write file var fileName = &quot;result.txt&quot;; fs.writeFile(fileName, _fnOutputString(), function (err) { if (err) { return console.log(err); } console.log(sprintf(&quot;Parsed HTML and saved output in %s file&quot;, fileName)); }); } } /** * Parse HTML file. * @method parseFile * @public * @param {string} file - Valid disk path of an HTML file. * @memberof Parser.prototype * @since 1.0.0 */ Parser.prototype.parseFile = function(file) { var me = this; fs.readFile(file, function read(err, data) { if (err) { console.log(&quot;Invalid file path&quot;); return; } me.parse(data.toString().replace((/ |\\r\\n|\\n|\\r/gm),&quot;&quot;)); //replace newlines and tabs me.returnResult(); }); } /** * Parse HTML from stream. * @method parseStream * @public * @param {Object} stream - Valid node readable stream. * @memberof Parser.prototype * @since 1.0.0 */ Parser.prototype.parseStream = function(stream) { if (typeof stream !== &quot;object&quot; &amp;&amp; typeof stream.on !== &quot;function&quot;) { return console.log(&quot;Invalid stream object&quot;); } var me = this; stream.on('data', function (buf) { me.parse(buf.toString().replace((/ |\\r\\n|\\n|\\r/gm),&quot;&quot;)); //replace newlines and tabs }); stream.on('end', function () { me.returnResult(); }); } module.exports = Parser; × Search results Close Documentation generated by JSDoc 3.5.5 on Wed Feb 21st 2018 using the DocStrap template. "},"config_rules.jsdoc.html":{"id":"config_rules.jsdoc.html","title":"Source: config/rules.jsdoc","body":" SEO COP Classes ParserRuleConditionRuleConfiguration Source: config/rules.jsdoc /** * Rule configuration * @class RuleConfiguration * @property {boolean} isEnabled Is rule execution enabled? Parser will execute only enabled rules. * @property {string} query jQuery query string to filter and select DOM elements on which conditions will be executed. * @property {RuleCondition} conditions Condition list. * @since 1.0.0 * @example * * { * &quot;img&quot;: { //rule name to nest related rule conditions under it * &quot;isEnabled&quot;: true, * &quot;query&quot;: &quot;img&quot;, * &quot;conditions&quot;: [ * { * &quot;attribute&quot;: { * &quot;condition&quot;: &quot;to.have.property&quot;, //valid expect.js condition * &quot;args&quot;: &quot;alt&quot; //arg to pass while calling expect.js condition function. e.g. to.have.property('alt'); * }, * &quot;error&quot;: &quot;There are %d &lt;img&gt; tag without alt attribute&quot; //error string to display when rule conditions fail * } * ] * }, * &quot;head&quot;: { * &quot;isEnabled&quot;: true, * &quot;query&quot;: &quot;head&quot;, * &quot;conditions&quot;: [ * { * &quot;children&quot;: { * &quot;condition&quot;: &quot;to.containSubset&quot;, * &quot;args&quot;: [{ * &quot;name&quot;: &quot;title&quot; * }] * }, * &quot;error&quot;: &quot;HTML without &lt;title&gt; tag&quot; * }, * { * &quot;children&quot;: { * &quot;condition&quot;: &quot;to.containSubset&quot;, * &quot;args&quot;: [{ * &quot;name&quot;: &quot;meta&quot;, * &quot;attribs&quot;: { * &quot;name&quot;: &quot;description&quot; * } * }] * }, * &quot;error&quot;: &quot;&lt;head&gt; without &lt;meta name='descriptions' ... /&gt; tag&quot; * } * ] * } * } * * */ /** * Rule condition * @class RuleCondition * @property {string} attribute Run rule condition on HTML Tag's attributes. * @property {string} attribute.condition A valid expect.js condition string. * @property {string|Object} attribute.args Arguments to pass in expect.js condition function. * @property {string} children Run rule condition on HTML Tag's children. * @property {string} children.condition A valid expect.js condition string. * @property {string|Object} children.args Arguments to pass in expect.js condition function. * @property {string} self Run rule condition on HTML Tag. * @property {string} self.condition A valid expect.js condition string. * @property {string|Object} self.args Arguments to pass in expect.js condition function. * @property {string} error Display error when rule condition fails. * @property {number} failCount Number of times rule condition failed. * @since 1.0.0 */ × Search results Close Documentation generated by JSDoc 3.5.5 on Wed Feb 21st 2018 using the DocStrap template. "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" SEO COP Classes ParserRuleConditionRuleConfiguration Classes Classes Parser RuleCondition RuleConfiguration × Search results Close Documentation generated by JSDoc 3.5.5 on Wed Feb 21st 2018 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" SEO COP Classes ParserRuleConditionRuleConfiguration SEO CopNode.js package to parse HTML and show SEO defectsInstallationInstall SEO Cop globally using npm: npm install -g seo-copTo install the latest version on npm locally and save it in your package's package.json file: npm install --save-dev seo-copUsage &amp; Examplesvar Parser = require('parser'); //simple HTML file parsing and printing defects on console var parser = new Parser({}, &quot;console&quot;); parser.parseFile(&quot;home.html&quot;); //input stream and parse data by reading stream. Print defects on console var fs = require('fs'); var parser = new Parser({}, &quot;console&quot;); var s = fs.createReadStream(&quot;home.html&quot;); parser.parseStream(s); //simple HTML file parsing and write defacts in output file var parser = new Parser({}, &quot;file&quot;); parser.parseFile(&quot;home.html&quot;); //simple HTML file parsing and get result on write stream var parser = new Parser({}, &quot;stream&quot;); var wStream = parser.outputWriteStream; wStream.write = function(data, _, done) { console.log(data); done(); } parser.parseFile(&quot;home.html&quot;); //Disable, Override, Define new rules and match conditions var parser = new Parser({ &quot;h1&quot;: { &quot;isEnabled&quot;: false //disable default h1 rule }, &quot;strong&quot;: { &quot;isEnabled&quot;: true, &quot;query&quot;: &quot;strong&quot;, &quot;conditions&quot;: [ { &quot;self&quot;: { &quot;condition&quot;: &quot;length.to.be.below&quot;, &quot;args&quot;: 5 //Override default rule condition }, &quot;error&quot;: &quot;There are more than 5 &lt;strong&gt; tag in HTML&quot; } ] }, &quot;custom&quot;: { //define custom rule &quot;isEnabled&quot;: true, &quot;query&quot;: &quot;head&quot;, &quot;conditions&quot;: [ { &quot;children&quot;: { &quot;condition&quot;: &quot;to.containSubset&quot;, &quot;args&quot;: [{ &quot;name&quot;: &quot;meta&quot;, &quot;attribs&quot;: { &quot;name&quot;: &quot;robots&quot; } }] }, &quot;error&quot;: &quot;&lt;head&gt; without &lt;meta name='robots' ... /&gt; tag&quot; } ] } }, &quot;console&quot;); parser.parseFile(&quot;home.html&quot;); DevelopmentCopy git repository and run: npm installThis should setup development environment. Once satisfied with code changes, update tests and run: npm testTo update the documentation, edit jsDoc comments and run: npm run-script docLicenseMIT × Search results Close Documentation generated by JSDoc 3.5.5 on Wed Feb 21st 2018 using the DocStrap template. "},"Parser.html":{"id":"Parser.html","title":"Class: Parser","body":" SEO COP Classes ParserRuleConditionRuleConfiguration Class: Parser Parser Parser new Parser(config [, output]) Creates a new Parser object. Parameters: Name Type Argument Default Description config RuleConfiguration | string A valid configuration options object or configuration as a JSON string. output string &lt;optional&gt; console Type of output. Supported output types are console, file &amp; stream. For file type, result.txt will be created after successful execution. Since: 1.0.0 Source: src/parser.js, line 32 Returns: Type Parser Example var Parser = require('parser'); var parser = new Parser({}, &quot;console&quot;); parser.parseFile(&quot;home.html&quot;); Methods parse(html) Parse HTML. Parameters: Name Type Description html string HTML content. Since: 1.0.0 Source: src/parser.js, line 124 parseFile(file) Parse HTML file. Parameters: Name Type Description file string Valid disk path of an HTML file. Since: 1.0.0 Source: src/parser.js, line 177 parseStream(stream) Parse HTML from stream. Parameters: Name Type Description stream Object Valid node readable stream. Since: 1.0.0 Source: src/parser.js, line 197 × Search results Close Documentation generated by JSDoc 3.5.5 on Wed Feb 21st 2018 using the DocStrap template. "},"RuleCondition.html":{"id":"RuleCondition.html","title":"Class: RuleCondition","body":" SEO COP Classes ParserRuleConditionRuleConfiguration Class: RuleCondition RuleCondition new RuleCondition() Rule condition Properties: Name Type Description attribute string Run rule condition on HTML Tag's attributes. Properties Name Type Description condition string A valid expect.js condition string. args string | Object Arguments to pass in expect.js condition function. children string Run rule condition on HTML Tag's children. Properties Name Type Description condition string A valid expect.js condition string. args string | Object Arguments to pass in expect.js condition function. self string Run rule condition on HTML Tag. Properties Name Type Description condition string A valid expect.js condition string. args string | Object Arguments to pass in expect.js condition function. error string Display error when rule condition fails. failCount number Number of times rule condition failed. Since: 1.0.0 Source: config/rules.jsdoc, line 56 × Search results Close Documentation generated by JSDoc 3.5.5 on Wed Feb 21st 2018 using the DocStrap template. "},"RuleConfiguration.html":{"id":"RuleConfiguration.html","title":"Class: RuleConfiguration","body":" SEO COP Classes ParserRuleConditionRuleConfiguration Class: RuleConfiguration RuleConfiguration new RuleConfiguration() Rule configuration Properties: Name Type Description isEnabled boolean Is rule execution enabled? Parser will execute only enabled rules. query string jQuery query string to filter and select DOM elements on which conditions will be executed. conditions RuleCondition Condition list. Since: 1.0.0 Source: config/rules.jsdoc, line 1 Example { &quot;img&quot;: { //rule name to nest related rule conditions under it &quot;isEnabled&quot;: true, &quot;query&quot;: &quot;img&quot;, &quot;conditions&quot;: [ { &quot;attribute&quot;: { &quot;condition&quot;: &quot;to.have.property&quot;, //valid expect.js condition &quot;args&quot;: &quot;alt&quot; //arg to pass while calling expect.js condition function. e.g. to.have.property('alt'); }, &quot;error&quot;: &quot;There are %d &lt;img&gt; tag without alt attribute&quot; //error string to display when rule conditions fail } ] }, &quot;head&quot;: { &quot;isEnabled&quot;: true, &quot;query&quot;: &quot;head&quot;, &quot;conditions&quot;: [ { &quot;children&quot;: { &quot;condition&quot;: &quot;to.containSubset&quot;, &quot;args&quot;: [{ &quot;name&quot;: &quot;title&quot; }] }, &quot;error&quot;: &quot;HTML without &lt;title&gt; tag&quot; }, { &quot;children&quot;: { &quot;condition&quot;: &quot;to.containSubset&quot;, &quot;args&quot;: [{ &quot;name&quot;: &quot;meta&quot;, &quot;attribs&quot;: { &quot;name&quot;: &quot;description&quot; } }] }, &quot;error&quot;: &quot;&lt;head&gt; without &lt;meta name='descriptions' ... /&gt; tag&quot; } ] } } × Search results Close Documentation generated by JSDoc 3.5.5 on Wed Feb 21st 2018 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
